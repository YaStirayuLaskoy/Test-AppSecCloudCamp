# Test-AppSecCloudCamp
Тестовое для AppSecCloudCamp: https://github.com/appseccloudcamp/test-assignment


## 1. Вопросы для разогрева

### 1. Расскажите, с какими задачами в направлении безопасной разработки вы сталкивались?
В направлении безопасной разработки я сталкивался с задачами, такими как анализ уязвимостей в коде, разработка безопасных архитектур приложений, обеспечение защиты данных.

### 2. Если вам приходилось проводить security code review или моделирование угроз, расскажите, как это было?
Проведение security code review и моделирование угроз - это важные шаги в обеспечении безопасности программного обеспечения. При проведении кодового обзора я анализировал код на предмет уязвимостей, проверял соответствие стандартам безопасности и рекомендациям. Моделирование угроз позволяло выявить потенциальные уязвимости и разработать стратегии их предотвращения.

### 4. Если у вас был опыт поиска уязвимостей, расскажите, как это было?

### 5. Почему вы хотите участвовать в стажировке?
Я хочу участвовать в стажировке, чтобы расширить свои знания и навыки в области безопасной разработки, получить опыт работы в команде профессионалов, а также применить свои знания на практике для решения реальных задач. Участие в стажировке поможет мне развиться как специалисту и подготовиться к будущей карьере в области информационной безопасности.

## Часть 2: Security code review: Python
Требуется определить тип уязвимости в примерах кода на Python и ответить на следующие вопросы:

- Указать строки, в которых присутствуют уязвимости.
- К каким последствиям может привести эксплуатация данных уязвимостей злоумышленником?
- Описать способы исправления уязвимостей.
- Если уязвимость можно исправить несколькими способами, необходимо перечислить их, выбрать лучший по вашему мнению и аргументировать свой выбор.

#### Пример №2.1

```
from flask import Flask, request
from jinja2 import Template

app = Flask(name)

@app.route("/page")
def page():
    name = request.values.get('name')
    age = request.values.get('age', 'unknown')
    output = Template('Hello ' + name + '! Your age is ' + age + '.').render()
return output

if name == "main":
    app.run(debug=True)
```

#### Ответ:
- В коде есть потенциальная уязвимость, которая связана с Jinja2 без должного экранирования или фильтрации входных данных. Это может привести к уязвимости внедрения шаблонов (Template Injection Vulnerability).
```
output = Template('Hello ' + name + '! Your age is ' + age + '.').render()
```

- Последствия эксплуатации уязвимости:
Злоумышленник может внедрить вредоносный код в шаблон, что может привести к исполнению произвольного кода на сервере или к утечке конфиденциальных данных.

- Способы исправления уязвимости:
1. Использовать безопасного метода фильтрации входных данных при рендеринге шаблона. Например, можно использовать фильтр `escape` для экранирования вывода данных:
```
output = Template('Hello ' + name + '! Your age is ' + age + '.').render(name=name, age=age|e)
```
2. Использовать функции `safe` для отключения автоматического экранирования Jinja2. Но подходит только в случае, если данные уже были очищены до передачи в шаблон:
```
output = Template('Hello ' + name + '! Your age is ' + age + '.').render(name=name, age=age).safe_substitute()
```


#### Пример №2.2
```
from flask import Flask, request
import subprocess

app = Flask(name)

@app.route("/dns")
def dns_lookup():
    hostname = request.values.get('hostname')
    cmd = 'nslookup ' + hostname
    output = subprocess.check_output(cmd, shell=True, text=True)
return output
if name == "main":
    app.run(debug=True)
```

#### Ответ:
- В коде уязвимость связана с безопасностью выполнения команд. Уязвимость заключается в том, что значение переменной `hostname` не фильтруется или проверяется перед использованием в команде `nslookup`.
Это может привести к возможности выполнения произвольных команд на сервере.
```
cmd = 'nslookup ' + hostname
output = subprocess.check_output(cmd, shell=True, text=True)
```

- Последствия эксплуатации уязвимости:
1. Злоумышленник может выполнить произвольные команды на сервере.
2. Это ожет привести к утечке конфиденциальных данных, удалению файлов, изменению настроек и т.д.

- Способы исправления уязвимости:
1. Необходимо проверять и фильтровать входные данные (hostname) перед использованием в команде.
2. Использование модуля `subprocess` без параметра `shell=True` и разделение команды и аргументов.

Например, можно передавать команду и аргументы как список строк:
```
cmd = ['nslookup', hostname]
output = subprocess.check_output(cmd, text=True)
```

## 3. Моделировани угроз

Изучите диаграмму потоков данных (Data Flow Diagram, DFD) сервиса, обеспечивающего отправку информации в Telegram и Slack:
![test-dfd](https://github.com/YaStirayuLaskoy/Test-AppSecCloudCamp/assets/122834885/af4fea0e-35ef-4f12-9a8e-7774350ed84e)


Краткое описание компонентов сервиса:

- User - авторизованный пользователь системы. Может настраивать отправку уведомлений и загружать изображения для дальнейшего использования при отправке уведомлений;
- Microfront - микрофронт, которые позволяет взаимодействовать с сервисом отправки информации;
- Backend application - набор микросервисов реализующих бизнес-логику приложения и обеспечивающих взаимодействие со всеми внешними сервисами;
- Auth - сервис отвечающий за аутентификацию и авторизацию клиентов сервиса отправки информации;
- S3 - объектное хранилище, предназначенное для хранения статического контента сервиса отправки информации;
- PostgreSQL - база данных, предназначенная для хранения пользовательских конфигураций сервиса отправки информации.


Проанализируйте диаграмму потоков данных приложения и ответьте на следующий вопросы:

- Расскажите, какие потенциальные проблемы безопасности существуют для данного сервиса?
1. Возможно, недосточная конфиденциальность данных пользователей, хранящихся в PostgreSQL.
2. Микросервисы Backend application и Auth могут содержать уязвимости.
3. Безопасность взаимодействие между компонентами системы, чтобы предотвратить атаки типа "человек посередине".

- Расскажите, к каким последствиям может привести эксплуатация проблем, найденных вами?
1. Утечка конфиденциальной информации пользователей.
2. Недоступность сервиса из-за атаки или вмешательства злоумышленников.
3. Потеря репутации и доверия пользователей к сервису.

- Расскажите, какие способы исправления уязвимостей и смягчения рисков вы можете предложить по отмеченным вами проблемам безопасности?
1. Обеспечить конфиденциальность данных путем шифрования данных в PostgreSQL и S3.
2. Проводить регулярные аудиты безопасности для выявления и устранения уязвимостей в микросервисах и других компонентах.
3. Обеспечить безопасное взаимодействие между компонентами путем использования надежных механизмов авторизации и аутентификации.
4. Регулярно обновлять компоненты системы, мониторировать активность и логи для выявления подозрительной активности.

- Напишите список уточняющих вопросов, которые вы бы задали разработчикам данного сервиса?
1. Какие меры безопасности были приняты для защиты данных пользователей в БД?
2. Какие методы аутентификации и авторизации используются для взаимодействия между компонентами системы?
3. Как часто проводятся аудиты безопасности и какие шаги предпринимаются для исправления обнаруженных уязвимостей?
4. Каковы процедуры реагирования на инциденты безопасности и как часто они проверяются на эффективность?
